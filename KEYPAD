/* 
  Display keypad number on PORTA (binary)
  Assumes mikroC Keypad library with Keypad_Init() and Keypad_Key_Press()
  Keypad is wired to PORTB (rows/cols). PORTA outputs the numeric value 0..9.
*/

unsigned short kp;        // variable to hold key code

void main() {
    TRISA = 0x00;         // PORTA as output (to display number)
    PORTA = 0x00;         // clear PORTA

    // If using PORTB for keypad data direction, leave TRISB default
    // or configure rows as inputs and cols as outputs in hardware library.
    // Many mikroC keypad libraries handle TRIS internally, so we don't set TRISB here.

    Keypad_Init();        // initialize keypad (assumes keypad on PORTB)

    while (1) {
        // wait for a key press (blocking); Keypad_Key_Press returns 0 if no key
        do {
            kp = Keypad_Key_Press();   // returns char code or 0
        } while (!kp);

        // small debounce delay (optional, but safe)
        Delay_ms(50);

        // If keypad returns ASCII digits '0'..'9'
        if (kp >= '0' && kp <= '9') {
            PORTA = (unsigned char)(kp - '0'); // write 0..9 to PORTA (binary)
        }
        else {
            // handle non-numeric keys: change as you want
            if (kp == '*') {
                // example: display 10 on PORTA
                PORTA = 10;
            } 
            else if (kp == '#') {
                // example: clear display
                PORTA = 0x00;
            }
            else if (kp == 'A') {
                PORTA = 11;
            }
            else if (kp == 'B') {
                PORTA = 12;
            }
            else if (kp == 'C') {
                PORTA = 13;
            }
            else if (kp == 'D') {
                PORTA = 14;
            }
            else {
                // unknown key: do nothing
            }
        }

        // wait until key is released (avoid repeated reads while held)
        do {
            kp = Keypad_Key_Press();
        } while (kp);

        Delay_ms(100); // small gap before next press accepted
    }
}
